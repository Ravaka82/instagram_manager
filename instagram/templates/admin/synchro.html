{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div class="module">
  <h3>üìù <strong>Compte s√©lectionn√© :</strong></h3>
  <table>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Name</th>
      <th>Bio</th>
    </tr>
    <tr>
      <td>{{ compte_maitre.id }}</td>
      <td>{{ compte_maitre.username }}</td>
      <td>{{ compte_maitre.name }}</td>
      <td>{{ compte_maitre.bio }}</td>
    </tr>
  </table>
  <br>

  <h3>üìã <strong>Liste des comptes non ma√Ætres :</strong></h3>
  <form method="POST" action="">
    {% csrf_token %}
    <table>
      <thead>
        <tr>
          <th><input type="checkbox" id="select_all" title="Tout s√©lectionner"></th>
          <th>ID</th>
          <th>Username</th>
          <th>Name</th>
          <th>Bio</th>
        </tr>
      </thead>
      <tbody>
        {% for user in compte_secondaire %}
        <tr>
          <td>
            <input type="checkbox" name="selected_accounts" value="{{ user.id }}">
          </td>
          <td>{{ user.id }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.bio }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5">Aucun compte non ma√Ætre trouv√©.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <br>
    <center><button type="submit" class="btn btn-success">‚úÖ Synchroniser</button><center><br>
    <a href="{% url 'admin:instagram_instagramuser_changelist' %}" class="button button-secondary">üîô Retour</a>
  </form>
</div>

<style>
  .module {
    border: 1px solid #ddd;
    padding: 20px;
    margin-top: 20px;
    border-radius: 5px;
    width: 70%;
    margin: 0 auto;
  }

  .module h3 {
    margin-bottom: 10px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  table th, table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
  }

  table th {
    background-color: grey;
  }

 
  .button-secondary {
    background-color: #6c757d;
    color: white;
  }

  .button-secondary:hover {
    background-color: #5a6268;
  }

  #select_all {
    cursor: pointer;
  }
</style>

<script>
  document.getElementById('select_all').addEventListener('change', function() {
    const checkboxes = document.querySelectorAll('input[name="selected_accounts"]');
    checkboxes.forEach(checkbox => {
      checkbox.checked = this.checked;
    });
  });
</script>
{% endblock %}
